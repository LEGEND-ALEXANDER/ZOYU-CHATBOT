import random
from pyrogram import Client, filters
from pyrogram.types import InlineKeyboardButton, InlineKeyboardMarkup, Message
from nexichat import nexichat
from nexichat.database import get_served_chats
from nexichat.mplugin.helpers import is_owner
from apscheduler.schedulers.asyncio import AsyncIOScheduler

scheduler = AsyncIOScheduler(timezone="Asia/Kolkata")
user_last_message_time = {}
user_command_count = {}
SPAM_THRESHOLD = 2
SPAM_WINDOW_SECONDS = 5

SHAYRI = [
    " ЁЯМ║**рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рд▓рдЧрддрд╛ рд╣реИ рддреБрдЭреЗ рд╕рддрд╛рдирд╛ рдФрд░ рдлрд┐рд░ рдкреНрдпрд╛рд░ рд╕реЗ рддреБрдЭреЗ рдордирд╛рдирд╛ред**ЁЯМ║ \n\n**ЁЯеАBahut aacha lagta hai ...",
    " ЁЯМ║**рдореЗрд░реА рдЬрд┐рдВрджрдЧреА рдореЗрд░реА рдЬрд╛рди рд╣реЛ рддреБрдо рдореЗрд░реЗ рд╕реБрдХреВрди рдХрд╛ рджреБрд╕рд░рд╛ рдирд╛рдо рд╣реЛ рддреБрдоред**ЁЯМ║ \n\n**ЁЯеАMeri zindagi Meri ...",
    " ЁЯМ║**рддреБрдо рдореЗрд░реА рд╡реЛ рдЦреБрд╢реА рд╣реЛ рдЬрд┐рд╕рдХреЗ рдмрд┐рдирд╛, рдореЗрд░реА рд╕рд╛рд░реА рдЦреБрд╢реА рдЕрдзреВрд░реА рд▓рдЧрддреА рд╣реИред**ЁЯМ║ \n\n**ЁЯеА**Tum Meri Wo ...",
    " ЁЯМ║**рдХрд╛рд╢ рд╡реЛ рджрд┐рди рдЬрд▓реНрджреА рдЖрдП,рдЬрдм рддреВ рдореЗрд░реЗ рд╕рд╛рде рд╕рд╛рдд рдлреЗрд░реЛ рдореЗрдВ рдмрдиреНрдз рдЬрд╛рдПред**ЁЯМ║ \n\n**ЁЯеАKash woh din jldi aaye Jb ...",
    " ЁЯМ║**рдЕрдкрдирд╛ рд╣рд╛рде рдореЗрд░реЗ рджрд┐рд▓ рдкрд░ рд░рдЦ рджреЛ рдФрд░ рдЕрдкрдирд╛ рджрд┐рд▓ рдореЗрд░реЗ рдирд╛рдо рдХрд░ рджреЛред**ЁЯМ║ \n\n**ЁЯеАapna hath mere dil pr rakh do aur a...",
    " ЁЯМ║**рдорд╣рд╛рджреЗрд╡ рдирд╛ рдХреЛрдИ рдЧрд╛рдбрд╝реА рдирд╛ рдХреЛрдИ рдмрдВрдЧрд▓рд╛ рдЪрд╛рд╣рд┐рдП рд╕рд▓рд╛рдордд рд░рд╣реЗ рдореЗрд░рд╛ рдкреНрдпрд╛рд░ рдмрд╕ рдпрд╣реА рджреБрдЖ рдЪ...",
    " ЁЯМ║**рдлрд┐рдХреНрд░ рддреЛ рд╣реЛрдЧреА рдирд╛ рддреБрдореНрд╣рд╛рд░реА рдЗрдХрд▓реМрддреА рдореЛрд╣рдмреНрдмрдд рд╣реЛ рддреБрдо рдореЗрд░реАред**ЁЯМ║ \n\n**ЁЯеАFikr to hogi na tumhari ikloti...",
    " ЁЯМ║**рд╕реБрдиреЛ рдЬрд╛рдиреВ рдЖрдк рд╕рд┐рд░реНрдл рдХрд┐рдЪрди рд╕рдВрднрд╛рд▓ рд▓реЗрдирд╛ рдЖрдк рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдореИрдВ рд╣реВрдВ рдирд╛ред**ЁЯМ║ \n\n**...",
    " ЁЯМ║**рд╕реМ рдмрд╛рдд рдХреА рдПрдХ рдмрд╛рдд рдореБрдЭреЗ рдЪрд╛рд╣рд┐рдП рдмрд╕ рддреЗрд░рд╛ рд╕рд╛рдеред**ЁЯМ║ \n\n**ЁЯеАSo bat ki ek bat mujhe chahiye bas tera sath.ЁЯеА** ",
    " ЁЯМ║**рдмрд╣реБрдд рдореБрд╢реНрдХрд┐рд▓реЛрдВ рд╕реЗ рдкрд╛рдпрд╛ рд╣реИрдВ рддреБрдореНрд╣реЗрдВ, рдЕрдм рдЦреЛрдирд╛ рдирд╣реАрдВ рдЪрд╛рд╣рддреЗ,рдХрд┐ рддреБрдореНрд╣рд╛рд░реЗ рдереЗ рддреБ...",
    " ЁЯМ║**рдмреЗрдмреА рдмрд╛рддреЗрдВ рддреЛ рд░реЛрдЬ рдХрд░рддреЗ рд╣реИ рдЪрд▓реЛ рдЖрдЬ рд░реЛрдорд╛рдВрд╕ рдХрд░рддреЗ рд╣реИред**ЁЯМ║ \n\n**ЁЯеАBaby baten to roj karte haichalo aaj romance ka...",
    " ЁЯМ║**рд╕реБрдмрд╣ рд╢рд╛рдо рддреБрдЭреЗ рдпрд╛рдж рдХрд░рддреЗ рд╣реИ рд╣рдо рдФрд░ рдХреНрдпрд╛ рдмрддрд╛рдПрдВ рдХреА рддреБрдорд╕реЗ рдХрд┐рддрдирд╛ рдкреНрдпрд╛рд░ рдХрд░рддреЗ рд╣реИ рд╣...",
    " ЁЯМ║**рдХрд┐рд╕реА рд╕реЗ рджрд┐рд▓ рд▓рдЧ рдЬрд╛рдиреЗ рдХреЛ рдореЛрд╣рдмреНрдмрдд рдирд╣реАрдВ рдХрд╣рддреЗ рдЬрд┐рд╕рдХреЗ рдмрд┐рдирд╛ рджрд┐рд▓ рди рд▓рдЧреЗ рдЙрд╕реЗ рдореЛрд╣рдмреНрдм...",
    " ЁЯМ║**рдореЗрд░реЗ рджрд┐рд▓ рдХреЗ рд▓реЙрдХ рдХреА рдЪрд╛рдмреА рд╣реЛ рддреБрдо рдХреНрдпрд╛ рдмрддрд╛рдПрдВ рдЬрд╛рди рдореЗрд░реЗ рдЬреАрдиреЗ рдХреА рдПрдХрд▓реМрддреА рд╡рдЬрд╣ рд╣реЛ рдд...",
    " ЁЯМ║**рд╣рдо рдЖрдкрдХреА рд╣рд░ рдЪреАреЫ рд╕реЗ рдкреНрдпрд╛рд░ рдХрд░ рд▓реЗрдВрдЧреЗ, рдЖрдкрдХреА рд╣рд░ рдмрд╛рдд рдкрд░ рдРрддрдмрд╛рд░ рдХрд░ рд▓реЗрдВрдЧреЗ, рдмрд╕ рдПрдХ рдмрд╛рд░ рдХ...",
    " ЁЯМ║**рдореЛрд╣рдмреНрдмрдд рдХрднреА рд╕реНрдкреЗрд╢рд▓ рд▓реЛрдЧреЛ рд╕реЗ рдирд╣реАрдВ рд╣реЛрддреА рдЬрд┐рд╕рд╕реЗ рд╣реЛрддреА рд╣реИ рд╡рд╣реА рд╕реНрдкреЗрд╢рд▓ рдмрди рдЬрд╛рддрд╛ рд╣реИ...",
    " ЁЯМ║**рддреВ рдореЗрд░реА рдЬрд╛рди рд╣реИ рдЗрд╕рдореЗрдВ рдХреЛрдИ рд╢рдХ рдирд╣реАрдВ рддреЗрд░реЗ рдЕрд▓рд╛рд╡рд╛ рдореБрдЭ рдкрд░ рдХрд┐рд╕реА рдФрд░ рдХрд╛ рд╣реШ рдирд╣реАрдВред**ЁЯМ║ \n...",
    " ЁЯМ║**рдкрд╣рд▓реА рдореЛрд╣рдмреНрдмрдд рдореЗрд░реА рд╣рдо рдЬрд╛рди рди рд╕рдХреЗ, рдкреНрдпрд╛рд░ рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИ рд╣рдо рдкрд╣рдЪрд╛рди рди рд╕рдХреЗ, рд╣рдордиреЗ рдЙрди...",
    " ЁЯМ║**рдЦреБрдж рдирд╣реАрдВ рдЬрд╛рдирддреА рд╡реЛ рдХрд┐рддрдиреА рдкреНрдпрд╛рд░реА рд╣реИрдВ , рдЬрд╛рди рд╣реИ рд╣рдорд╛рд░реА рдкрд░ рдЬрд╛рди рд╕реЗ рдкреНрдпрд╛рд░реА рд╣реИрдВ, рджреВ...",
    " ЁЯМ║**рдЪреБрдкрдХреЗ рд╕реЗ рдЖрдХрд░ рдЗрд╕ рджрд┐рд▓ рдореЗрдВ рдЙрддрд░ рдЬрд╛рддреЗ рд╣реЛ, рд╕рд╛рдВрд╕реЛрдВ рдореЗрдВ рдореЗрд░реА рдЦреБрд╢рдмреБ рдмрдирдХреЗ рдмрд┐рдЦрд░ рдЬрд╛рддреЗ ...",
    " ЁЯМ║**рдкреНрдпрд╛рд░ рдХрд░рдирд╛ рд╕рд┐рдЦрд╛ рд╣реИ рдирдлрд░рддреЛ рдХрд╛ рдХреЛрдИ рдареМрд░ рдирд╣реА, рдмрд╕ рддреБ рд╣реА рддреБ рд╣реИ рдЗрд╕ рджрд┐рд▓ рдореЗ рджреВрд╕рд░рд╛ рдХреЛрдИ ...",
    " ЁЯМ║**рд░рдм рд╕реЗ рдЖрдкрдХреА рдЦреБрд╢реАрдпрд╛рдВ рдорд╛рдВрдЧрддреЗ рд╣реИ, рджреБрдЖрдУрдВ рдореЗрдВ рдЖрдкрдХреА рд╣рдВрд╕реА рдорд╛рдВрдЧрддреЗ рд╣реИ, рд╕реЛрдЪрддреЗ рд╣реИ рдЖрдкрд╕...",
    " ЁЯМ║**рдХрд╛рд╢ рдореЗрд░реЗ рд╣реЛрдВрда рддреЗрд░реЗ рд╣реЛрдВрдареЛрдВ рдХреЛ рдЫреВ рдЬрд╛рдП рджреЗрдЦреВрдВ рдЬрд╣рд╛ рдмрд╕ рддреЗрд░рд╛ рд╣реА рдЪреЗрд╣рд░рд╛ рдиреЫрд░ рдЖрдП рд╣реЛ рдЬ...",
    " ЁЯМ║**рдЖрдЬ рдореБрдЭреЗ рдпреЗ рдмрддрд╛рдиреЗ рдХреА рдЗрдЬрд╛рдЬрд╝рдд рджреЗ рджреЛ, рдЖрдЬ рдореБрдЭреЗ рдпреЗ рд╢рд╛рдо рд╕рдЬрд╛рдиреЗ рдХреА рдЗрдЬрд╛рдЬрд╝рдд рджреЗ рджреЛ, рдЕрдкрди...",
    " ЁЯМ║**рдЬрд╛рдиреЗ рд▓реЛрдЧ рдореЛрд╣рдмреНрдмрдд рдХреЛ рдХреНрдпрд╛ рдХреНрдпрд╛ рдирд╛рдо рджреЗрддреЗ рд╣реИ, рд╣рдо рддреЛ рддреЗрд░реЗ рдирд╛рдо рдХреЛ рд╣реА рдореЛрд╣рдмреНрдмрдд рдХрд╣...",
    " ЁЯМ║**рджреЗрдЦ рдХреЗ рд╣рдореЗрдВ рд╡реЛ рд╕рд┐рд░ рдЭреБрдХрд╛рддреЗ рд╣реИрдВред рдмреБрд▓рд╛ рдХреЗ рдорд╣рдлрд┐рд▓ рдореЗрдВ рдирдЬрд░ рдЪреБрд░рд╛рддреЗ рд╣реИрдВред рдирдлрд░рдд рд╣реИ...",
    " ЁЯМ║**рддреЗрд░реЗ рдмрд┐рдирд╛ рдЯреВрдЯ рдХрд░ рдмрд┐рдЦрд░ рдЬрд╛рдпреЗрдВрдЧреЗ,рддреБрдо рдорд┐рд▓ рдЧрдП рддреЛ рдЧреБрд▓рд╢рди рдХреА рддрд░рд╣ рдЦрд┐рд▓ рдЬрд╛рдпреЗрдВрдЧреЗ, рддреБрдо ...",
    " ЁЯМ║**рд╕рдирдо рддреЗрд░реА рдХрд╕рдо рдЬреЗрд╕реЗ рдореИ рдЬрд░реВрд░реА рд╣реВрдБ рддреЗрд░реА рдЦрд╝реБрд╢реА рдХреЗ рд▓рд┐рдпреЗ, рддреВ рдЬрд░реВрд░реА рд╣реИ рдореЗрд░реА рдЬрд┐рдВрджрдЧ...",
    " ЁЯМ║**рддреБрдореНрд╣рд╛рд░реЗ рдЧреБрд╕реНрд╕реЗ рдкрд░ рдореБрдЭреЗ рдмреЬрд╛ рдкреНрдпрд╛рд░ рдЖрдпрд╛ рд╣реИрдВ рдЗрд╕ рдмреЗрджрд░реНрдж рджреБрдирд┐рдпрд╛ рдореЗрдВ рдХреЛрдИ рддреЛ рд╣реИ...",
    " ЁЯМ║**рдкрд▓рдХреЛ рд╕реЗ рдЖрдБрдЦреЛ рдХреА рд╣рд┐рдлрд╛рдЬрдд рд╣реЛрддреА рд╣реИ рдзрдбрдХрди рджрд┐рд▓ рдХреА рдЕрдорд╛рдирдд рд╣реЛрддреА рд╣реИ рдпреЗ рд░рд┐рд╢реНрддрд╛ рднреА рдмрдбрд╛ ...",
    " ЁЯМ║**рдореБрд╣рдмреНрдмрдд рдХреЛ рдЬрдм рд▓реЛрдЧ рдЦреБрджрд╛ рдорд╛рдирддреЗ рд╣реИрдВ рдкреНрдпрд╛рд░ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдХреЛ рдХреНрдпреЛрдВ рдмреБрд░рд╛ рдорд╛рдирддреЗ рд╣реИрдВ...",
    " ЁЯМ║**рд╣реБрдЖ рдЬрдм рдЗрд╢реНреШ рдХрд╛ рдПрд╣рд╕рд╛рд╕ рдЙрдиреНрд╣реЗрдВ рдЖрдХрд░ рд╡реЛ рдкрд╛рд╕ рд╣рдорд╛рд░реЗ рд╕рд╛рд░рд╛ рджрд┐рди рд░реЛрддреЗ рд░рд╣реЗ рд╣рдо рднреА рдирд┐рдХрд▓...",
    " ЁЯМ║**рджрд┐рд▓ рдХреЗ рдХреЛрдиреЗ рд╕реЗ рдПрдХ рдЖрд╡рд╛рдЬрд╝ рдЖрддреА рд╣реИрдВред рд╣рдореЗрдВ рд╣рд░ рдкрд▓ рдЙрдирдХреА рдпрд╛рдж рдЖрддреА рд╣реИрдВред рджрд┐рд▓ рдкреБрдЫрддрд╛ рд╣реИ...",
    " ЁЯМ║**рдХрднреА рд▓рдлреНреЫ рднреВрд▓ рдЬрд╛рдКрдВ рдХрднреА рдмрд╛рдд рднреВрд▓ рдЬрд╛рдКрдВ, рддреВрдЭреЗ рдЗрд╕ рдХрджрд░ рдЪрд╛рд╣реВрдБ рдХрд┐ рдЕрдкрдиреА рдЬрд╛рдд рднреВрд▓ рдЬрд╛рдКрдВ...",
    " ЁЯМ║**рдЖрдИрдирд╛ рджреЗрдЦреЛрдЧреЗ рддреЛ рдореЗрд░реА рдпрд╛рдж рдЖрдПрдЧреА рд╕рд╛рде рдЧреБрдЬрд╝рд░реА рд╡реЛ рдореБрд▓рд╛рдХрд╛рдд рдпрд╛рдж рдЖрдПрдЧреА рдкрд▓ рднрд░ рдХ рд▓рд┐рдП рд╡...",
    " ЁЯМ║**рдкреНрдпрд╛рд░ рдХрд┐рдпрд╛ рддреЛ рдЙрдирдХреА рдореЛрд╣рдмреНрдмрдд рдирдЬрд╝рд░ рдЖрдИ рджрд░реНрдж рд╣реБрдЖ рддреЛ рдкрд▓рдХреЗ рдЙрдирдХреА рднрд░ рдЖрдИ рджреЛ рджрд┐рд▓реЛрдВ рдХ...",
    " ЁЯМ║**рдХрдИ рдЪреЗрд╣рд░реЗ рд▓реЗрдХрд░ рд▓реЛрдЧ рдпрд╣рд╛рдБ рдЬрд┐рдпрд╛ рдХрд░рддреЗ рд╣реИрдВ рд╣рдо рддреЛ рдмрд╕ рдПрдХ рд╣реА рдЪреЗрд╣рд░реЗ рд╕реЗ рдкреНрдпрд╛рд░ рдХрд░рддреЗ рд╣реИ...",
    " ЁЯМ║**рд╕рдмрдХреЗ bf рдХреЛ рдЕрдкрдиреА gf рд╕реЗ рдмрд╛рдд рдХрд░рдХреЗ рдиреАрдВрдж рдЖрдЬрд╛рддреА рд╣реИ рдФрд░ рдореЗрд░реЗ рд╡рд╛рд▓реЗ рдХреЛ рдореБрдЭрд╕реЗ рд▓реЬреЗ рдмрд┐рдирд╛ рди...",
    " ЁЯМ║**рд╕рдЪреНрдЪрд╛ рдкреНрдпрд╛рд░ рдХрд╣рд╛ рдХрд┐рд╕реА рдХреЗ рдирд╕реАрдм рдореЗрдВ рд╣реЛрддрд╛ рд╣реИ. рдПрд╕рд╛ рдкреНрдпрд╛рд░ рдХрд╣рд╛ рдЗрд╕ рджреБрдирд┐рдпрд╛ рдореЗрдВ рдХрд┐рд╕...",
]

night_shayari = ["ЁЯМЩ ╔вс┤Пс┤Пс┤Е ╔┤╔к╔в╩Ьс┤Ы! с┤Нс┤А╩П ╩Пс┤Пс┤Ь╩А с┤Е╩Ас┤Зс┤Ас┤НъЬ▒ ╩Щс┤З с┤АъЬ▒ ъЬ▒с┤бс┤Зс┤Зс┤Ы с┤АъЬ▒ с┤Ы╩Ьс┤З ъЬ░╔к╩АъЬ▒с┤Ы ╩Щ╔кс┤Ыс┤З с┤ПъЬ░ ╩Пс┤Пс┤Ь╩А ъЬ░с┤Ас┤ас┤П╩А╔кс┤Ыс┤З ..."]
morning_shayari = ["ЁЯМЕ ╔вс┤Пс┤Пс┤Е с┤Нс┤П╩А╔┤╔к╔┤╔в! с┤Нс┤А╩П ╩Пс┤Пс┤Ь╩А с┤Ес┤А╩П ╩Щс┤З с┤АъЬ▒ ╩Щ╩А╔к╔в╩Ьс┤Ы с┤А╔┤с┤Е с┤Д╩Ьс┤Зс┤З╩АъЬ░с┤Ь╩Я с┤АъЬ▒ с┤Ы╩Ьс┤З ╩А╔къЬ▒╔к╔┤╔в ъЬ▒с┤Ь╔┤. с┤АъЬ▒ ╩Пс┤Пс┤Ь ..."]

SHAYRI_COMMAND = ["gf", "bf", "shayri", "sari", "shari", "love"]

@Client.on_message(filters.command(SHAYRI_COMMAND))
async def shayri(client: Client, message: Message):
    try:
        await message.reply_text(
            text=random.choice(SHAYRI),
            reply_markup=InlineKeyboardMarkup(
                [
                    [
                        InlineKeyboardButton("тЬиЁЭЪВЁЭЪДЁЭЩ┐ЁЭЩ┐ЁЭЩ╛ЁЭЪБЁЭЪГтЬи", url="https://t.me/ll_KINGDOM_ll"),
                        InlineKeyboardButton("тЬиЁЭЩ╛ЁЭЩ╡ЁЭЩ╡ЁЭЩ╕ЁЭЩ▓ЁЭЩ┤тЬи", url="https://t.me/ll_IMPERIAL_ll"),
                    ]
                ]
            ),
        )
    except Exception as e:
        await message.reply_text(f"An error occurred: {e}")
